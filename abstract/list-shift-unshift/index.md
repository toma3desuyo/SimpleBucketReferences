---
title: 先頭の要素追加 / 削除
description: shift/unshift による先頭の取り出しと挿入
---

## 概要
先頭操作はリストの最初の要素を取り出す（shift）または前方に挿入する（unshift）方法である。キューやタイムラインなど先頭が特別な意味を持つデータ構造で利用される。

## 基本例
```pseudo
キュー = []
キュー.unshift("job1")
キュー.unshift("job2")  # 先頭に追加される
処理対象 = キュー.shift()  # "job2"
```
- 多くの動的配列では先頭操作が O(n) になるため、デックやリンクリストを検討する。

## 応用パターン
### 両端キュー
```pseudo
デック.unshift(左要素)
デック.push(右要素)
左から取り出す = デック.shift()
右から取り出す = デック.pop()
```
- 両端から効率的に操作でき、LRU キャッシュなどに向く。

### スライディングウィンドウ
```pseudo
ウィンドウ.unshift(新要素)
もし ウィンドウ.長さ > 上限 なら ウィンドウ.pop()
```
- 先頭挿入と末尾削除を組み合わせ、最新データだけ保持する。

## 注意点
1. **性能**: 動的配列の shift/unshift は内部で全要素をシフトする。大量操作ではデック実装を使う。
2. **空状態**: shift 時に空ならどうするか決める。例外、`null`、`未定義` など。
3. **同期制御**: 複数スレッドでキューを扱う場合は排他制御やロックフリーキューを利用する。

## 関連トピック
- `abstract/list-push-pop/index.md`: 末尾操作
- `abstract/list/index.md`: リスト全般
- `abstract/list-traversal/index.md`: キューの走査
