---
title: 加算演算子
description: 数値や文字列を加算・結合する抽象的な演算子の挙動
---

## 概要
加算演算子は 2 つ以上のオペランドを受け取り、数値であれば合計を、文字列や配列的構造であれば結合を表現する。算術処理だけでなく、単位換算、集計、文字列連結など幅広い用途で使われる基本演算である。

## 主な特徴
- **交換法則と結合法則**: 数値領域では a + b = b + a、(a + b) + c = a + (b + c) が成り立つ。浮動小数点では丸め誤差により厳密には崩れることがある。
- **型変換**: 一部言語では片方が文字列のとき自動で連結演算に切り替わる。暗黙変換が行われるかを仕様で明記する。
- **単項 +**: 値を数値に正規化する役割を持つ実装もある。入力が文字列や真偽値のときの変換ルールを整理する。

## 基本例
```pseudo
合計 = 0
for 各値 in 入力一覧:
    合計 = 合計 + 値

ラベル = "件数: " + 合計.文字列化()
```
- 数値加算は繰り返し処理で徐々に累積する。
- 文字列連結ではオペランド順序が結果に影響し、国際化テキストでは区切りを明確にする。

## 応用パターン
### 可変長加算
```pseudo
結果 = 可変長加算(1, 2, 3, オプション: { "初期値"→10 })
```
- 可変長引数を受け取る集約関数を用意し、初期値や単位を引数で指定できるようにすると柔軟。

### ベクトル加算
```pseudo
ベクトル1 = (x: 1, y: 2)
ベクトル2 = (x: -1, y: 4)
和 = (x: ベクトル1.x + ベクトル2.x,
      y: ベクトル1.y + ベクトル2.y)
```
- 成分ごとに加算し、型安全性と桁溢れ検出を考慮する。

## 注意点
1. **桁溢れ**: 固定長整数では上限・下限を超えると折り返す。境界チェックを事前に行う。
2. **浮動小数点誤差**: 0.1 のような値を多数加算すると丸め誤差が蓄積する。高精度計算が必要な場合は任意精度型を使用する。
3. **文字列連結コスト**: 大量の文字列を `+` で結合すると再割り当てが多発する。バッファやビルダーを利用する。

## 関連トピック
- `abstract/subtraction-operator/index.md`: 減算演算子
- `abstract/number-type/index.md`: 数値型の表現
- `abstract/variadic-arguments/index.md`: 可変長引数を受ける加算処理
