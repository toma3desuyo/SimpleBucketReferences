---
title: リストの結合(文字列化)
description: 要素を区切り文字で連結して文字列化する操作
---

## 概要
リストの結合は、要素を一つの文字列または配列に連結する操作である。区切り文字やフォーマッタを指定し、ログや表示、CSV 生成などに用いる。

## 基本例
```pseudo
項目 = ["red", "green", "blue"]
文字列 = 結合(項目, 区切り: ", ")
# => "red, green, blue"
```
- 区切りを空文字にすれば単純な連結になる。

## 応用パターン
### カスタム整形
```pseudo
文字列 = 結合(項目,
    区切り: " | ",
    フォーマッタ: 無名関数(値): 値.大文字化())
```
- 各要素を整形してから結合する。国際化対応のためロケール固有の区切りを渡す。

### 最後の区切りを変える
```pseudo
もし 項目.長さ <= 1 なら return 結合(項目)
最後 = 項目.最後()
先頭 = 項目.先頭n(項目.長さ-1)
return 結合(先頭, ", ") + " と " + 最後
```
- 「A, B と C」のような自然言語向け整形に使う。

## 注意点
1. **巨大リスト**: 文字列連結のコストが高いので、ストリームに逐次書き出すかビルダーを利用する。
2. **型の混在**: 非文字列要素は文字列化ルールを揃えないと [object Object] のようになる。フォーマッタを提供する。
3. **エスケープ**: CSV や URL など特定フォーマットではエスケープが必要。事前に処理する。

## 関連トピック
- `abstract/string-concatenation/index.md`: 文字列連結
- `abstract/list-map/index.md`: 要素変換
- `abstract/string-interpolation/index.md`: テンプレート整形
