---
title: 関数
description: 入力を受け取り出力を返す再利用可能な処理単位
---

## 概要
関数は引数を受け取り、内部で計算を行い、戻り値を返す処理の単位である。副作用の有無や状態の扱いにより設計指針が変わる。

## 特徴
- **シグネチャ**: 名前、引数、戻り値、例外を含む定義。ドキュメント化して契約とする。
- **純粋関数**: 副作用がなく同じ入力に対して同じ出力を返す。テストと並列実行が容易。
- **第一級オブジェクト**: 多くの言語で関数は値として扱え、変数に詰めたり渡したりできる。

## 基本例
```pseudo
関数 合計(数値一覧):
    合計値 = 0
    for 値 in 数値一覧:
        合計値 += 値
    return 合計値
```
- 引数の検証や例外処理を内部で行い、戻り値で結果を表す。

## 応用パターン
### 高階関数
```pseudo
関数 マップ(入力, 変換器):
    出力 = []
    for 要素 in 入力:
        出力.追加(変換器(要素))
    return 出力
```
- 関数を引数として受け取り、汎用的な変換処理を構築する。

### クロージャー
```pseudo
関数 カウンター(初期値):
    値 = 初期値
    return 無名関数():
        値 += 1
        return 値
```
- 外側のスコープを捕捉して状態を保持する関数を生成する。

## 注意点
1. **引数の数**: 多すぎると理解しづらい。構造体やオプションオブジェクトにまとめる。
2. **例外契約**: どのような失敗が起こりうるかを明示し、呼び出し側が対応できるようにする。
3. **スタック利用**: 再帰関数はスタックを消費する。末尾再帰最適化の有無を把握し、必要ならループへ書き換える。

## 関連トピック
- `abstract/anonymous-function/index.md`: 無名関数
- `abstract/variadic-arguments/index.md`: 可変長引数
- `abstract/property-definition/index.md`: メソッドとの違い
