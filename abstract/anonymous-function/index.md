---
title: 無名関数
description: 名前を持たずに関数値を生成し渡すための構文
---

## 概要
無名関数は識別子を付けずに定義された関数のことで、その場で値として扱い、他の関数に渡したり変数へ格納したりする。イベント処理や高階関数での一時的な動作指定に適している。

## 特徴
- **式としての定義**: 文ではなく式なので、代入や引数として挿入できる。
- **スコープの捕捉**: 定義位置の変数を参照できるクロージャーとなる場合が多い。捕捉する値が変更されるタイミングを理解することが重要。
- **自己参照**: 再帰が必要な場合は引数で自身を受け取るか、即時に名前を付けるテクニックを用いる。

## 例
```pseudo
フィルタ済み = フィルタ(入力一覧, 条件: 無名関数(要素):
    return 要素.タグに("公開") が含まれる
)

即時実行 = (無名関数():
    設定値 = 読み込み()
    return 設定値
)()
```
- 一時的なコールバックを渡す用途と、その場で即時実行して初期化する用途を示す。

## 応用パターン
### 部分適用
```pseudo
加算器 = 無名関数(増分):
    return 無名関数(元): 元 + 増分

プラス3 = 加算器(3)
結果 = プラス3(7)  # 10
```
- 無名関数を返すことで、設定済みのパラメータを保持した関数を作れる。

### デコレータ的利用
```pseudo
測定付き = 無名関数(処理):
    return 無名関数(...引数):
        計測開始()
        結果 = 処理(...引数)
        計測終了()
        return 結果
```
- 他の処理をラップし、前後に副作用を挿入できる。

## 注意点
1. **デバッグの難しさ**: 名前が無いとスタックトレースで識別しづらい。必要に応じてラベルやコメントを付ける。
2. **キャプチャ漏れ**: 大きなオブジェクトをクロージャーで捕捉すると GC されなくなる。不要になった参照は解放する。
3. **過度なネスト**: 無名関数を深く入れ子にすると可読性が低下する。小さな命名関数に分離する判断が重要。

## 関連トピック
- `abstract/function/index.md`: 関数定義の基本
- `abstract/callback-function/index.md`: コールバックの設計
- `abstract/variable-scope/index.md`: スコープとキャプチャ
