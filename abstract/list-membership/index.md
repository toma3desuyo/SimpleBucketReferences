---
title: リストへの存在確認
description: 要素がリストに含まれているか調べる操作
---

## 概要
リストの包含判定は、特定の値がリスト内に存在するかどうかを真偽値で返す。線形検索が基本だが、ソートやハッシュ化によって高速化できる。

## 基本例
```pseudo
値が存在する = リスト.含む("apple")
もし 値が存在する なら 処理()
```
- 直感的な API を提供し、等価比較の方法を明示する。

## 応用パターン
### カスタム比較
```pseudo
存在 = リスト.含む(検索対象,
    比較: 無名関数(a, b): 正規化(a) == 正規化(b))
```
- 大文字小文字を無視したり、ID のみで比較したいときに利用する。

### インデックス取得
```pseudo
index = リスト.位置("apple")  # 見つからなければ -1
```
- 位置も必要であれば API を分ける。

## 最適化
- **ソート済みリスト**: 二分探索で O(log n) に短縮できる。
- **ハッシュセット**: 大量の包含判定を行う場合はセットへ変換し O(1) で照会する。

## 注意点
1. **比較コスト**: 大きなオブジェクトを比較する場合、ハッシュ化やキー抽出で費用を減らす。
2. **多重格納**: 同じ値が複数ある場合、最初の一致で終了するかすべてカウントするかを決める。
3. **リアルタイム更新**: リストが更新される間に判定を行うと結果が不安定になる。ロックやコピーを利用する。

## 関連トピック
- `abstract/list-single-search/index.md`: 検索アルゴリズム
- `abstract/key-existence/index.md`: 連想配列の存在判定
- `abstract/list-filter/index.md`: 条件による抽出
