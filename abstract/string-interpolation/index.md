---
title: 変数の埋め込み
description: テンプレート内へ変数や式を埋め込む手法
---

## 概要
文字列補間は、テンプレート文字列中のプレースホルダーに値や式を埋め込む仕組みである。国際化や可読性の高いログ出力を実現できる。

## 基本構文
```pseudo
メッセージ = f"{名前} さん、残高は {残高} 円です"
```
- プレースホルダーの構文（`{}`、`$()` など）は言語による。式の評価タイミングも仕様を確認する。

## 応用パターン
### 書式指定
```pseudo
テンプレート = "{日付:YYYY-MM-DD} {金額:0.00}" 
結果 = 補間(テンプレート, { 日付: 今日, 金額: 値 })
```
- フォーマット指定子で桁数や通貨記号を制御する。

### 国際化
```pseudo
テンプレート = 辞書.取得(ロケール, "greeting")
結果 = 補間(テンプレート, { user: 名前 })
```
- ロケール別のテンプレートを用意し、変数だけ共有する。

## 注意点
1. **エスケープ**: プレースホルダー記号を文字として表示したい場合はエスケープ方法を用意する。
2. **評価コスト**: 補間式で重い計算を行うと文字列生成のたびに実行される。事前に計算した値を渡す。
3. **安全性**: SQL などへ直接補間するとインジェクションになる。プリペアドステートメントを使う。

## 関連トピック
- `abstract/string-concatenation/index.md`: 連結
- `abstract/string-type/index.md`: 文字列の性質
- `abstract/list-join/index.md`: 配列を文字列化
