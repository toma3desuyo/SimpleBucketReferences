---
title: 正規表現
description: パターンで文字列を検索・加工する表記法
---

## 概要
正規表現は、文字列中のパターンを表現する短い記法であり、検索、抽出、置換、検証に用いられる。`/pattern/` や `r"pattern"` のように記述する。

## 主な構成要素
- **リテラル文字**: そのまま一致する文字。
- **メタ文字**: `.`、`*`、`+`、`?` などで繰り返しや任意文字を表す。
- **グループ**: `()` で囲み、部分一致やキャプチャを行う。名前付きグループも存在する。
- **文字クラス**: `[A-Z]` のように集合を定義する。

## 基本例
```pseudo
パターン = /\d{4}-\d{2}-\d{2}/
もし パターン.一致("2024-06-01") なら 真
```
- 日付形式を検証する例。エスケープ処理に注意。

## 応用パターン
### キャプチャと置換
```pseudo
パターン = /(\w+)=(\w+)/
入力 = "mode=dark"
一致 = パターン.実行(入力)
キー = 一致.グループ(1)
値 = 一致.グループ(2)
```
- キャプチャした値を利用してマップに格納する。

### 旗・オプション
```pseudo
パターン = /error/i  # 大文字小文字を無視
```
- フラグでマルチライン、グローバル、unicode などの挙動を切り替える。

## 注意点
1. **過度な複雑さ**: 長いパターンは可読性が低くなる。コメント付き正規表現やユーティリティ関数で分割する。
2. **バックトラッキング地獄**: 複雑なパターンで指数的な時間がかかる場合がある。原始的な構文に分解するか、オートマトンで処理する。
3. **エスケープ漏れ**: ユーザー入力をパターンに挿入する際はエスケープし、ReDoS 脆弱性を避ける。

## 関連トピック
- `abstract/string-search/index.md`: 文字列検索
- `abstract/string-replacement/index.md`: 置換
- `abstract/external-communication/index.md`: 入力検証
