---
title: 全ペアの取得
description: 連想配列のキーと値を同時に走査する方法
---

## 概要
ペア列挙は連想配列や辞書のキーと値を同じループで取り出し、両方の情報を利用する操作である。設定のダンプやキー付き処理に向く。

## 基本例
```pseudo
for (キー, 値) in 設定.ペア列挙(順序: 追加順):
    表示("%s=%s" % (キー, 値))
```
- API で順序を指定できるようにし、デフォルト値を文書化する。

## 応用パターン
### フィルター付き列挙
```pseudo
for (キー, 値) in 設定.ペア列挙(条件: 無名関数(k, v): v != null):
    保存(キー, 値)
```
- 列挙前にフィルタリングして無効値を除外する。

### スナップショット
```pseudo
ペア一覧 = 設定.ペア列挙(スナップショット: 真)
for (キー, 値) in ペア一覧:
    設定.削除(キー)
```
- 列挙中に削除や更新を行う場合、スナップショットを取得して整合性を保つ。

## 注意点
1. **順序保証**: ハッシュ実装では順序が定まらない。必要ならソートしてから列挙する。
2. **同時変更**: 列挙中の変更可否を仕様に明示する。安全でない場合はエラーを投げる。
3. **性能**: ペアをタプル化するとメモリを消費する。イテレーターを返してオンデマンドで生成する。

## 関連トピック
- `abstract/associative-array/index.md`: 連想配列
- `abstract/key-enumeration/index.md`: キーの列挙
- `abstract/value-enumeration/index.md`: 値の列挙
