---
title: 引数の既定値
description: 関数の未指定パラメーターへ既定値を割り当てる仕組み
---

## 概要
既定引数は関数呼び出しで省略されたパラメーターに自動的に値を割り当てる。API の柔軟性を高め、呼び出し側が必要な値だけ渡せるようにする。

## 特徴
- **評価タイミング**: 既定値が定義時に評価されるか、呼び出し毎に評価されるかを理解する。
- **依存関係**: 既定値で前の引数の値を参照できる言語もある。参照順序に注意。
- **可変オブジェクト**: 配列や連想配列を既定値にすると全呼び出しで共有される実装がある。

## 基本例
```pseudo
関数 接続(host = "localhost", port = 443, secure = 真):
    ...

接続()               # 既定値
接続("cache", 11211, 偽)
```
- 既定値を明示することで省略可能な引数が一目で分かる。

## 応用パターン
### 名前付き引数との併用
```pseudo
描画(幅 = 100, 高さ = 100, 色 = "黒")
描画(高さ = 50)  # 幅と色は既定
```
- 引数名を指定できる場合、順序の自由度が増す。

### 関数を既定値に
```pseudo
関数 取得(キー, ローダー = 無名関数(): return null):
    値 = キャッシュ.取得(キー)
    もし 値 が null なら:
        値 = ローダー()
```
- 関数を既定値に渡して遅延評価する。ローダーが重い場合は毎回新しい関数を渡す。

## 注意点
1. **共有状態**: 可変オブジェクトを既定値にすると書き換えが他の呼び出しへ影響する。`null` を既定にして内部で生成するようにする。
2. **オプションの増えすぎ**: 引数の数が多いと API が複雑になる。設定オブジェクトを受け取るデザインも検討する。
3. **国際化**: 既定値が文化依存（タイムゾーンなど）な場合は環境設定から決定する。

## 関連トピック
- `abstract/function/index.md`: 関数定義
- `abstract/variadic-arguments/index.md`: 可変長引数との組み合わせ
- `abstract/none-like-type/index.md`: 未指定状態の表現
