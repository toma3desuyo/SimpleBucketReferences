---
title: 末尾の要素追加 / 削除
description: push/pop によるスタック的な追加・削除
---

## 概要
リストの末尾操作は、スタックと同様に末尾へ要素を追加（push）し、末尾から取り出す（pop）操作である。履歴管理や一時スタックに使われる。

## 基本例
```pseudo
スタック = []
スタック.push("first")
スタック.push("second")
値 = スタック.pop()  # "second"
```
- push/pop は O(1) であることが望ましい。動的配列では容量を超えた際に自動拡張する。

## 応用パターン
### Undo スタック
```pseudo
操作履歴.push(現在状態)
...
もし 戻す なら:
    前状態 = 操作履歴.pop()
    状態を戻す(前状態)
```
- 履歴の上限を設けてメモリ使用量を制御する。

### 非破壊的操作
```pseudo
新リスト = 既存リスト + [新要素]
(新リスト, 取り出した要素) = (既存リスト.末尾を除いたもの, 既存リスト.最後の要素)
```
- イミュータブル構造では新しいリストを返す。

## 注意点
1. **空のリスト**: pop 実行時に空だと例外を投げるか `null` を返すか仕様で定義する。
2. **スレッド安全性**: 複数スレッドで push/pop する場合はロックやロックフリー構造を採用する。
3. **容量管理**: 無制限に push するとメモリが増える。定期的にクリアしたり上限を設ける。

## 関連トピック
- `abstract/list-shift-unshift/index.md`: 先頭での操作
- `abstract/list/index.md`: リスト概要
- `abstract/iteration-flow-control/index.md`: スタックを使った制御
