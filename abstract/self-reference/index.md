---
title: 自分自身の参照
description: オブジェクト自身を参照して状態やメソッドへアクセスする方法
---

## 概要
自身参照（this/self）は、オブジェクト指向言語で現在のインスタンスを指す予約語であり、フィールドやメソッドへアクセスする際に利用される。クロージャーやスタティック文脈では意味が変わる場合がある。

## 使い道
- **フィールド参照**: `self.フィールド` で内部状態を操作する。
- **メソッド呼び出し**: 他のメソッドを `self.メソッド()` で呼ぶ。
- **フルエント API**: `return self` でメソッドチェーンを構築する。

## 基本例
```pseudo
クラス カウンター:
    フィールド 値 = 0

    メソッド インクリメント():
        self.値 += 1
        return self
```
- `self` を利用し、チェーン可能な API を実現する。

## 応用パターン
### クロージャーとの相互作用
```pseudo
メソッド 設定():
    観測者登録(無名関数(): self.更新())
```
- クロージャー内で `self` を参照すると、外側の `self` が捕捉される。言語によっては `this` バインドが変わるため注意。

### バインド
```pseudo
関数 実行 = メソッド.バインド(self)
```
- イベントハンドラに渡す前に `self` へバインドしておくと、呼び出し時に正しいコンテキストが保たれる。

## 注意点
1. **未初期化状態**: コンストラクター内で `self` を外部へ渡すと、初期化前に使われる恐れがある。
2. **スタティック文脈**: 静的メソッドでは `self` が利用できない場合が多い。クラス参照を直接使う。
3. **参照リーク**: クロージャーに `self` を渡しすぎると GC が解放できない。弱参照や解除処理を用意する。

## 関連トピック
- `abstract/class/index.md`: クラス
- `abstract/static-members/index.md`: 静的文脈
- `abstract/encapsulation/index.md`: 内部状態の扱い
